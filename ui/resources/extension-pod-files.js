(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".extension-button-small{padding:4px 10px;border-radius:4px;border:1px solid transparent}.extension-button-small:focus,.extension-button-small:focus-visible{outline:2px auto -webkit-focus-ring-color}.extension-button-text{text-transform:none;margin-right:5px}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function d(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=d(s);fetch(s.href,r)}})();var z={exports:{}},R={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G=window.React,H=Symbol.for("react.element"),Q=Symbol.for("react.fragment"),X=Object.prototype.hasOwnProperty,Z=G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ee={key:!0,ref:!0,__self:!0,__source:!0};function J(e,t,d){var a,s={},r=null,l=null;d!==void 0&&(r=""+d),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(l=t.ref);for(a in t)X.call(t,a)&&!ee.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)s[a]===void 0&&(s[a]=t[a]);return{$$typeof:H,type:e,key:r,ref:l,props:s,_owner:Z.current}}R.Fragment=Q;R.jsx=J;R.jsxs=J;z.exports=R;var n=z.exports,U={},V=window.ReactDOM;U.createRoot=V.createRoot,U.hydrateRoot=V.hydrateRoot;const L=({show:e=!1,style:t={}})=>e?n.jsx("span",{style:{...t,fontSize:"14px"},children:n.jsx("i",{className:"fa fa-circle-notch fa-spin",style:{color:"#0DADEA"}})}):null,O=({show:e=!0,icon:t="",style:d={}})=>e?n.jsx("span",{style:{fontSize:"14px"},children:n.jsx("i",{className:t,style:d})}):null,b=window.React.useState;function q({application:e,resource:t}){var I,B,D,S,k;const[d,a]=b(((D=(B=(I=t==null?void 0:t.spec)==null?void 0:I.containers)==null?void 0:B.find(()=>!0))==null?void 0:D.name)||""),[s,r]=b(""),[l,p]=b(!1),[v,E]=b(!1),[C,P]=b(!1),A=async(o=!1)=>{var f,j,N,u,h,x,y,w,g;const i=((j=(f=e==null?void 0:e.spec)==null?void 0:f.destination)==null?void 0:j.server)||"",_=((u=(N=e==null?void 0:e.spec)==null?void 0:N.destination)==null?void 0:u.name)||"",m=await(await fetch(`/extensions/pod-files/files?namespace=${(h=t==null?void 0:t.metadata)==null?void 0:h.namespace}&pod=${(x=t==null?void 0:t.metadata)==null?void 0:x.name}&container=${d}&path=${s}&clusterUrl=${encodeURIComponent(i)}&clusterName=${encodeURIComponent(_)}`,{headers:{"ArgoCD-Project-Name":(y=e==null?void 0:e.spec)==null?void 0:y.project,"ArgoCD-Application-Name":`${(w=e==null?void 0:e.metadata)==null?void 0:w.namespace}:${(g=e==null?void 0:e.metadata)==null?void 0:g.name}`}})).blob();if(o){const c=document.createElement("a");c.style.display="none",c.href=window.URL.createObjectURL(m),c.setAttribute("download",s.replace(/^.*(\\|\/|:)/,"")),document.body.appendChild(c),c.click(),document.body.removeChild(c);return}window.open(window.URL.createObjectURL(m),"_blank").focus()},K=async()=>{p(!0);try{await A()}catch(o){console.error(o)}finally{setTimeout(()=>p(!1),1e3)}},W=async()=>{E(!0);try{await A(!0)}catch(o){console.error(o)}finally{setTimeout(()=>E(!1),1e3)}},Y=async()=>{P(!0);try{const o=document.createElement("input");o.setAttribute("type","file"),o.style.display="none",document.body.appendChild(o),o.addEventListener("cancel",()=>P(!1)),o.click(),await new Promise((i,_)=>{o.onchange=async $=>{var u,h,x,y,w,g,c,F,T;if($.target.files.length!==1){_(Error("only support 1 file"));return}const m=$.target.files[0],f=new FormData;f.append("file",m,m.name);const j=((h=(u=e==null?void 0:e.spec)==null?void 0:u.destination)==null?void 0:h.server)||"",N=((y=(x=e==null?void 0:e.spec)==null?void 0:x.destination)==null?void 0:y.name)||"";await fetch(`/extensions/pod-files/files?namespace=${(w=t==null?void 0:t.metadata)==null?void 0:w.namespace}&pod=${(g=t==null?void 0:t.metadata)==null?void 0:g.name}&container=${d}&path=${s}&clusterUrl=${encodeURIComponent(j)}&clusterName=${encodeURIComponent(N)}`,{method:"POST",headers:{"ArgoCD-Project-Name":(c=e==null?void 0:e.spec)==null?void 0:c.project,"ArgoCD-Application-Name":`${(F=e==null?void 0:e.metadata)==null?void 0:F.namespace}:${(T=e==null?void 0:e.metadata)==null?void 0:T.name}`},body:f}),i()}}),document.body.removeChild(o)}catch(o){console.error(o)}finally{setTimeout(()=>P(!1),1e3)}};return n.jsx(n.Fragment,{children:n.jsx("div",{className:"white-box",children:n.jsx("div",{className:"white-box__details",children:n.jsxs("div",{className:"row white-box__details-row",children:[n.jsx("div",{className:"columns small-3",style:{paddingLeft:"10px",paddingRight:"10px"},children:n.jsx("select",{className:"argo-field",style:{paddingBottom:"5.5px"},value:d,onChange:o=>a(o.target.value),children:(k=(S=t==null?void 0:t.spec)==null?void 0:S.containers)==null?void 0:k.map((o,i)=>n.jsx("option",{value:o.name,children:o.name},i))})}),n.jsx("div",{className:"columns small-6",style:{paddingLeft:"10px",paddingRight:"20px"},children:n.jsx("input",{className:"argo-field",type:"text",placeholder:"file path to download or upload",value:s,onChange:o=>r(o.target.value)})}),n.jsxs("div",{className:"columns small-3",children:[n.jsxs("button",{className:"argo-button argo-button--base extension-button-small",style:{marginLeft:"5px"},onClick:K,disabled:l,children:[n.jsx("span",{className:"extension-button-text",children:"View"}),n.jsx(L,{show:l}),n.jsx(O,{show:!l,icon:"fa-solid fa-arrow-up-right-from-square"})]}),n.jsxs("button",{className:"argo-button argo-button--base extension-button-small",style:{marginLeft:"5px"},onClick:W,disabled:v,children:[n.jsx("span",{className:"extension-button-text",children:"Download"}),n.jsx(L,{show:v}),n.jsx(O,{show:!v,icon:"fa-solid fa-download"})]}),n.jsxs("button",{className:"argo-button argo-button--base extension-button-small",style:{marginLeft:"5px"},onClick:Y,disabled:C,children:[n.jsx("span",{className:"extension-button-text",children:"Upload"}),n.jsx(L,{show:C}),n.jsx(O,{show:!C,icon:"fa-solid fa-cloud-arrow-up"})]})]})]})})})})}const te=window.React;var M;(M=window==null?void 0:window.extensionsAPI)!=null&&M.registerResourceExtension?window.extensionsAPI.registerResourceExtension(q,"","Pod","Files",{icon:"fa-solid fa-file"}):U.createRoot(document.getElementById("root")).render(n.jsx(te.StrictMode,{children:n.jsx(q,{})}));
